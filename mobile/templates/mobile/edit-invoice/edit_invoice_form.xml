<form id="EditInvoiceForm" scroll="True" xmlns="https://hyperview.org/hyperview">
    {% for field, errors in errors.items %}
        {% for error in errors %}
            <text style="Help--Error">{{ field }}: {{ error }}</text>
        {% endfor %}
    {% endfor %}

    <view style="FormGroup">
      <text style="Label">Title</text>
      <text-field
        name="title"
        placeholder="New Saas app.."
        style="Input"
        placeholderTextColor="#5e6363"
        value="{{ invoice.title }}"
      />
    </view>

    {% if invoice.invoice_type == 1%}
    <view style="FormGroup" id="Invoice_Interval">
      <text style="Label">Invoice Interval</text>
      <picker-field
          field-text-style="Input"
          name="invoice_interval"
          placeholder="Select an invoice interval"
          modal-style="PickerModal"
          modal-text-style="PickerModal__text"
          value="{{ invoice.invoice_interval }}"
      >
        <picker-item label="Daily" value="D" />
        <picker-item label="Weekly" value="W" />
        <picker-item label="Biweekly" value="B" />
        <picker-item label="Monthly" value="M" />
        <picker-item label="Quarterly" value="Q" />
        <picker-item label="Yearly" value="Y" />
      </picker-field>
    </view>
    {% endif %}
    {% if invoice.invoice_type == 2 %}
    <view style="FormGroup" id="Milestones">
      <text style="Label">Milestone total steps</text>
      <text-field
        name="milestone_total_steps"
        value="{{ invoice.milestone_total_steps }}"
        placeholder="3"
        style="Input"
        placeholderTextColor="#5e6363"
      />
    </view>
    {% endif %}
    {% if invoice.invoice_type == 1 or invoice.invoice_type == 2 %}
    <view style="FormGroup" id="Hourly_Rate">
      <text style="Label">Hourly Rate</text>
      <text-field
        name="invoice_rate"
        placeholder="50"
        style="Input"
        placeholderTextColor="#5e6363"
        value="{{ invoice.invoice_rate }}"
      />
    </view>
    {% endif %}

    {% if invoice.invoice_type == 3 %}
    <view style="FormGroup" id="Weekly_Rate">
      <text style="Label">Weekly rate</text>
      <text-field
        name="weekly_rate"
        value="{{ invoice.invoice_rate }}"
        placeholder="1500"
        style="Input"
        placeholderTextColor="#5e6363"
      />
    </view>
    {% endif %}

    <view style="FormGroup">
      <text style="Label">Budget</text>
      <text-field
        name="total_budget"
        placeholder="10000"
        style="Input"
        placeholderTextColor="#5e6363"
        value="{{ invoice.total_budget|default_if_none:0 }}"
      />
     </view>

     <view style="FormGroup">
      <text style="Label">Email recipient name</text>
      <text-field
        name="email_recipient_name"
        placeholder="John Smith"
        style="Input"
        placeholderTextColor="#5e6363"
        value="{{ invoice.email_recipient_name }}"
      />
     </view>
     <view style="FormGroup">
      <text style="Label">Email recipient</text>
      <text-field
        name="email_recipient"
        placeholder="john@smith.com"
        style="Input"
        placeholderTextColor="#5e6363"
        value="{{ invoice.email_recipient }}"
      />
     </view>

    <view style="MarginTop20">
      <view style="Wrapper">
          <text
              action="replace"
              delay="500"
              href="{% url 'mobile:edit_invoice' invoice_id=invoice.id %}"
              show-during-load="Loading-Screen"
              style="Primary"
              target="EditInvoiceForm"
              verb="post"
            >
              Update
            </text>
      </view>
    </view>

    {% if success %}
    <behavior trigger="load" action="close" href="#" />
    <behavior trigger="load" action="dispatch-event" event-name="reload-invoice-{{ invoice.id }}" />
    {% include 'mobile/_toast.xml' %}
    {% endif %}

</form>
