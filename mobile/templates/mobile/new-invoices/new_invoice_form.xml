<form id="NewInvoiceForm" scroll="True" xmlns="https://hyperview.org/hyperview">
    {% for field, errors in errors.items %}
        {% for error in errors %}
            <text style="Help--Error">{{ field }}: {{ error }}</text>
        {% endfor %}
    {% endfor %}

    <view style="FormGroup">
      <text style="Label">Title</text>
      <text-field
        name="title"
        placeholder="New Saas app.."
        style="Input"
        placeholderTextColor="#5e6363"
      />
    </view>
    <view style="FormGroup">
      <text style="Label">Select an invoice type</text>
      <select-single
          style="Pills"
          name="invoice_type"
      >
          <option label="Interval" style="Pill" value="1" selected="true">
              <text style="Pill__Label">Interval</text>
              <behavior trigger="select" action="show" target="Invoice_Interval" />
              <behavior trigger="select" action="show" target="Hourly_Rate" />
              <behavior trigger="select" action="hide" target="Milestones" />
              <behavior trigger="select" action="hide" target="Weekly_Rate" />
          </option>
        <option label="Milestone" style="Pill" value="2">
            <text style="Pill__Label">Milestone</text>
            <behavior trigger="select" action="hide" target="Invoice_Interval" />
            <behavior trigger="select" action="show" target="Hourly_Rate" />
            <behavior trigger="select" action="show" target="Milestones" />
            <behavior trigger="select" action="hide" target="Weekly_Rate" />
        </option>
        <option label="Weekly" style="Pill" value="3">
            <text style="Pill__Label">Weekly</text>
            <behavior trigger="select" action="hide" target="Invoice_Interval" />
            <behavior trigger="select" action="hide" target="Hourly_Rate" />
            <behavior trigger="select" action="hide" target="Milestones" />
            <behavior trigger="select" action="show" target="Weekly_Rate" />
        </option>
      </select-single>
    </view>

    <view style="FormGroup" id="Invoice_Interval">
      <text style="Label">Invoice Interval</text>
      <picker-field
          field-text-style="Input"
          name="invoice_interval"
          placeholder="Select an invoice interval"
          modal-style="PickerModal"
          modal-text-style="PickerModal__text"
          value="W"
      >
        <picker-item label="Daily" value="D" />
        <picker-item label="Weekly" value="W" />
        <picker-item label="Biweekly" value="B" />
        <picker-item label="Monthly" value="M" />
        <picker-item label="Quarterly" value="Q" />
        <picker-item label="Yearly" value="Y" />
      </picker-field>
    </view>
    <view style="FormGroup" id="Milestones" hide="true">
      <text style="Label">Milestone total steps</text>
      <text-field
        name="milestone_total_steps"
        value="3"
        placeholder="3"
        style="Input"
        placeholderTextColor="#5e6363"
      />
    </view>
    <view style="FormGroup" id="Hourly_Rate">
      <text style="Label">Hourly Rate</text>
      <text-field
        name="hourly_rate"
        value="50"
        placeholder="50"
        style="Input"
        placeholderTextColor="#5e6363"
      />
    </view>

    <view style="FormGroup" id="Weekly_Rate" hide="true">
      <text style="Label">Weekly rate</text>
      <text-field
        name="weekly_rate"
        value="1500"
        placeholder="1500"
        style="Input"
        placeholderTextColor="#5e6363"
      />
    </view>

     <view style="FormGroup">
      <text style="Label">Email recipient name</text>
      <text-field
        name="email_recipient_name"
        placeholder="John Smith"
        style="Input"
        placeholderTextColor="#5e6363"
      />
     </view>
     <view style="FormGroup">
      <text style="Label">Email recipient</text>
      <text-field
        name="email_recipient"
        placeholder="john@smith.com"
        style="Input"
        placeholderTextColor="#5e6363"
      />
     </view>

    <view style="MarginTop20">
      <view style="Wrapper">
          <text
              action="replace"
              delay="500"
              href="{% url 'mobile:new_invoices' %}"
              show-during-load="Loading-Screen"
              style="Primary"
              target="NewInvoiceForm"
              verb="post"
            >
              Create
            </text>
      </view>
    </view>

    {% if success %}
    <behavior trigger="load" action="close" href="#" />
    <behavior trigger="load" action="dispatch-event" event-name="reload-invoices" />
    {% include 'mobile/_toast.xml' %}
    {% endif %}
</form>
