<form id="NewInvoiceForm" scroll="True" xmlns="https://hyperview.org/hyperview">
    {% include 'mobile/_errors.xml' with errors=errors.items %}

    {% include 'mobile/inputs/text_field.xml' with label="Title" name="title" placeholder="New Saas app..." %}

    <view style="FormGroup">
      <text style="Label">Select an invoice type</text>
      <select-single
          style="Pills"
          name="invoice_type"
      >
          <option label="Interval" style="Pill" value="1" selected="true">
              <text style="Pill__Label">Interval</text>
              <behavior trigger="select" action="show" target="Invoice_Interval" />
              <behavior trigger="select" action="show" target="Hourly_Rate" />
              <behavior trigger="select" action="hide" target="Milestones" />
              <behavior trigger="select" action="hide" target="Weekly_Rate" />
          </option>
        <option label="Milestone" style="Pill" value="2">
            <text style="Pill__Label">Milestone</text>
            <behavior trigger="select" action="hide" target="Invoice_Interval" />
            <behavior trigger="select" action="show" target="Hourly_Rate" />
            <behavior trigger="select" action="show" target="Milestones" />
            <behavior trigger="select" action="hide" target="Weekly_Rate" />
        </option>
        <option label="Weekly" style="Pill" value="3">
            <text style="Pill__Label">Weekly</text>
            <behavior trigger="select" action="hide" target="Invoice_Interval" />
            <behavior trigger="select" action="hide" target="Hourly_Rate" />
            <behavior trigger="select" action="hide" target="Milestones" />
            <behavior trigger="select" action="show" target="Weekly_Rate" />
        </option>
      </select-single>
    </view>

    {% if invoice.invoice_type == 3 %}
        {% include 'mobile/inputs/text_field.xml' with id="Weekly_Rate" label="Weekly Rate" name="weekly_rate" placeholder="1500" %}
    {% endif %}

    <view style="FormGroup" id="Invoice_Interval">
      <text style="Label">Invoice Interval</text>
      <picker-field
          field-text-style="Input"
          name="invoice_interval"
          placeholder="Select an invoice interval"
          modal-style="PickerModal"
          modal-text-style="PickerModal__text"
          value="W"
      >
        <picker-item label="Daily" value="D" />
        <picker-item label="Weekly" value="W" />
        <picker-item label="Biweekly" value="B" />
        <picker-item label="Monthly" value="M" />
        <picker-item label="Quarterly" value="Q" />
        <picker-item label="Yearly" value="Y" />
      </picker-field>
    </view>
    {% include 'mobile/inputs/text_field.xml' with hide="true" id="Milestones" label="Milestone total steps" name="milestone_total_steps" placeholder="3" %}
    {% include 'mobile/inputs/text_field.xml' with id="Hourly_Rate" label="Hourly Rate" name="hourly_rate" placeholder="50" %}
    {% include 'mobile/inputs/text_field.xml' with hide="true" id="Weekly_Rate" label="Weekly Rate" name="weekly_rate" value=invoice.invoice_rate placeholder="1500" %}
    {% include 'mobile/inputs/text_field.xml' with label="Budget" name="total_budget" placeholder="1000" %}
    {% include 'mobile/inputs/text_field.xml' with label="Email recipient name" name="email_recipient_name" placeholder="John Smith" %}
    {% include 'mobile/inputs/text_field.xml' with label="Email recipient" name="email_recipient" placeholder="john@smith.com" %}

    {% url 'mobile:new_invoices' as save_url %}
    {% include 'mobile/inputs/submit_btn.xml' with title="Create" target="NewInvoiceForm" url=save_url %}


    {% if success %}
    <behavior trigger="load" action="close" href="#" />
    <behavior trigger="load" action="dispatch-event" event-name="reload-invoices" />
    {% include 'mobile/_toast.xml' %}
    {% endif %}
</form>
