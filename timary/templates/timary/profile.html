{% extends 'timary/base.html' %}

{% block content %}
    <div class="max-w-3xl mx-auto" id="profile">
        <h1 class="text-3xl my-6 text-center" id="profile">Your profile</h1>
        {% include "partials/_profile.html" %}

        <div class="tabs flex justify-center my-10" hx-boost="true">
            <a class="tab tab-bordered {% if not tab or tab == '1' %} tab-active {% else %} "{% endif %} href="{% url 'timary:user_profile' %}?tab=1">Settings</a>
            {% if user.can_integrate_with_accounting_tools %}
                <a class="tab tab-bordered {% if tab == '2' %} tab-active {% else %} "{% endif %} href="{% url 'timary:user_profile' %}?tab=2">Integrations</a>
            {% endif %}
            <a class="tab tab-bordered {% if tab == '3' %} tab-active {% else %} "{% endif %} href="{% url 'timary:user_profile' %}?tab=3">Sent Invoices</a>
            <a class="tab tab-bordered {% if tab == '4' %} tab-active {% else %} "{% endif %} href="{% url 'timary:user_profile' %}?tab=4">Archived Invoices</a>
        </div>

        {% if tab == "1" %}
            <h1 class="text-3xl my-6 text-center">Your settings</h1>
            {% include "partials/_settings.html" %}

            <hr />
            <h1 class="text-3xl my-6 text-center">Dangerous</h1>
            <div class="flex justify-center">
                <a class="link text-center" href="{% url 'timary:close_account' %}">Close account</a>
            </div>

        {% elif tab == "2" %}

            {% if user.can_integrate_with_accounting_tools %}
                <h1 class="text-3xl my-6 text-center">Your integrations</h1>
                {% include "partials/_integrations.html" %}
            {% endif %}

        {% elif tab == "3" %}

            <div class="max-w-xl mx-auto">
                <h3 class="text-3xl my-6 text-center">Sent invoices</h3>
                {% if sent_invoices.count > 0 %}

                    <ul>
                        {% for sent_invoice in sent_invoices %}
                            {% include "partials/_sent_invoice.html" with sent_invoice=sent_invoice %}
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>

        {% elif tab == "4" %}

            <div class="max-w-xl mx-auto">
                <h3 class="text-3xl my-6 text-center">Archived invoices</h3>

                {% if archived_invoices.count > 0 %}
                    <ul>
                        {% for archive_invoice in archived_invoices %}
                            {% include "partials/_archive_invoice.html" with archive_invoice=archive_invoice %}
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>

        {% else %}

            <h1 class="text-3xl my-6 text-center">Your settings</h1>
            {% include "partials/_settings.html" %}

        {% endif %}

    </div>

{% endblock %}
